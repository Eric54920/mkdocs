---
comments: true
---

åœ¨ Python ä¸­ï¼Œå‡½æ•°æ³¨é‡Šï¼ˆDocstring å’Œ ç±»å‹æ³¨è§£ï¼‰æœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä¸‹é¢ä»‹ç» Python å‡½æ•°æ³¨é‡Šçš„å‡ ç§æ–¹å¼ï¼š

### 1. ç±»å‹æ³¨è§£ï¼ˆType Hintsï¼‰

Python 3 æä¾›äº† **ç±»å‹æ³¨è§£** æ¥æŒ‡æ˜å‡½æ•°å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹ï¼š
```python
def add(a: int, b: int) -> int:
    return a + b
```

#### 1.1 è¯´æ˜

- `a: int` å’Œ `b: int` è¡¨ç¤ºå‚æ•° `a` å’Œ `b` éœ€è¦æ˜¯æ•´æ•°
- `-> int` è¡¨ç¤ºè¿”å›å€¼ç±»å‹æ˜¯ `int`

Python **ä¸ä¼šå¼ºåˆ¶ç±»å‹æ£€æŸ¥**ï¼Œä½†å¯ä»¥å€ŸåŠ©å·¥å…·ï¼ˆå¦‚ `mypy`ï¼‰è¿›è¡Œé™æ€æ£€æŸ¥ï¼š
```sh
mypy script.py  # æ£€æŸ¥ç±»å‹
```

### 2. Docstringï¼ˆæ–‡æ¡£å­—ç¬¦ä¸²ï¼‰

Docstring ç”¨äºæä¾›è¯¦ç»†çš„å‡½æ•°è¯´æ˜ï¼Œé€šå¸¸ä½¿ç”¨ä¸‰é‡å¼•å· `""" """` æˆ– `''' '''`ï¼š
```python
def add(a: int, b: int) -> int:
    """
    è®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„å’Œã€‚

    å‚æ•°:
    - a (int): ç¬¬ä¸€ä¸ªæ•´æ•°
    - b (int): ç¬¬äºŒä¸ªæ•´æ•°

    è¿”å›:
    - int: ä¸¤ä¸ªæ•´æ•°çš„å’Œ

    ç¤ºä¾‹:
    >>> add(3, 5)
    8
    """
    return a + b
```

#### 2.1 è¯´æ˜

- è¯´æ˜ **å‡½æ•°ç”¨é€”**
- åˆ—å‡º **å‚æ•°åŠç±»å‹**
- æŒ‡æ˜ **è¿”å›å€¼**
- ç»™å‡º **ç¤ºä¾‹**

### 3. ä¸åŒé£æ ¼çš„ Docstring

Python æ²¡æœ‰å¼ºåˆ¶ä½¿ç”¨æŸç§æ ¼å¼ï¼Œä½†ä»¥ä¸‹å‡ ç§é£æ ¼å¸¸è§ï¼š

#### 3.1 Google é£æ ¼

```python
def add(a: int, b: int) -> int:
    """
    è®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„å’Œã€‚

    Args:
        a (int): ç¬¬ä¸€ä¸ªæ•´æ•°
        b (int): ç¬¬äºŒä¸ªæ•´æ•°

    Returns:
        int: ä¸¤ä¸ªæ•´æ•°çš„å’Œ

    Example:
        >>> add(3, 5)
        8
    """
    return a + b
```

#### 3.2 NumPy é£æ ¼

```python
def add(a: int, b: int) -> int:
    """
    è®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„å’Œã€‚

    Parameters
    ----------
    a : int
        ç¬¬ä¸€ä¸ªæ•´æ•°
    b : int
        ç¬¬äºŒä¸ªæ•´æ•°

    Returns
    -------
    int
        ä¸¤ä¸ªæ•´æ•°çš„å’Œ

    Examples
    --------
    >>> add(3, 5)
    8
    """
    return a + b
```

#### 3.3 reStructuredText (Sphinx) é£æ ¼

```python
def add(a: int, b: int) -> int:
    """
    è®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„å’Œã€‚

    :param a: ç¬¬ä¸€ä¸ªæ•´æ•°
    :type a: int
    :param b: ç¬¬äºŒä¸ªæ•´æ•°
    :type b: int
    :return: ä¸¤ä¸ªæ•´æ•°çš„å’Œ
    :rtype: int

    :example:
        >>> add(3, 5)
        8
    """
    return a + b
```

### 4. ä½¿ç”¨ `help()` æŸ¥çœ‹æ³¨é‡Š

åœ¨ Python äº¤äº’å¼ç¯å¢ƒæˆ–è„šæœ¬ä¸­ï¼Œå¯ä»¥ç”¨ `help()` æŸ¥çœ‹å‡½æ•°çš„ Docstringï¼š
```python
help(add)
```
è¾“å‡ºï¼š
```
Help on function add in module __main__:

add(a: int, b: int) -> int
    è®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„å’Œã€‚

    å‚æ•°:
    - a (int): ç¬¬ä¸€ä¸ªæ•´æ•°
    - b (int): ç¬¬äºŒä¸ªæ•´æ•°

    è¿”å›:
    - int: ä¸¤ä¸ªæ•´æ•°çš„å’Œ
```

### 5. ç»“åˆ `typing` è¿›è¡Œæ›´å¤æ‚çš„æ³¨è§£

Python `typing` æ¨¡å—æä¾›äº†æ›´å¤šé«˜çº§çš„ç±»å‹æ³¨è§£ï¼š
```python
from typing import List, Tuple, Union

def process_data(data: List[Union[int, float]]) -> Tuple[int, float]:
    """
    å¤„ç†æ•°æ®åˆ—è¡¨ã€‚

    å‚æ•°:
    - data (List[Union[int, float]]): ç”±æ•´æ•°å’Œæµ®ç‚¹æ•°ç»„æˆçš„åˆ—è¡¨

    è¿”å›:
    - Tuple[int, float]: (æ•´æ•°ä¸ªæ•°, æµ®ç‚¹æ•°æ€»å’Œ)
    """
    int_count = sum(1 for x in data if isinstance(x, int))
    float_sum = sum(x for x in data if isinstance(x, float))
    return int_count, float_sum
```

### 6. æ€»ç»“

| æ–¹æ³• | ä½œç”¨ |
|------|------|
| **ç±»å‹æ³¨è§£** | æŒ‡å®šå‚æ•°å’Œè¿”å›å€¼ç±»å‹ |
| **Docstring** | æä¾›å‡½æ•°çš„è¯¦ç»†æè¿° |
| **Google é£æ ¼** | `Args / Returns` ç»“æ„æ¸…æ™° |
| **NumPy é£æ ¼** | é€‚ç”¨äºç§‘å­¦è®¡ç®— |
| **Sphinx é£æ ¼** | é€‚åˆè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ |

**æ¨èå†™æ³•ï¼š**
- **ç®€å•å‡½æ•°** ç›´æ¥ç”¨ç±»å‹æ³¨è§£å³å¯
- **å¤æ‚å‡½æ•°** ç»“åˆ **Docstring + ç±»å‹æ³¨è§£**
- **å›¢é˜Ÿå¼€å‘** ç»Ÿä¸€ä½¿ç”¨ **Google/NumPy/Sphinx é£æ ¼**

è¿™æ ·æ—¢èƒ½æé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œä¹Ÿæ–¹ä¾¿è‡ªåŠ¨åŒ–æ–‡æ¡£å·¥å…·è§£æï¼ğŸš€
